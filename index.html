<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dough Pull Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .mt-4 {
            margin-top: 20px;
        }
        p {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dough Pull Calculator</h1>
        <form id="doughCalculator">
            <!-- Day of the Week -->
            <div class="form-group">
                <label for="dayOfWeek">Day of the Week:</label>
                <select id="dayOfWeek" required>
                    <option value="" disabled selected>Select a day</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Saturday">Saturday</option>
                    <option value="Sunday">Sunday</option>
                </select>
            </div>

            <!-- Dough in Fridge -->
            <div class="form-group">
                <label for="fridgeStock">Dough in Fridge (bins):</label>
                <input type="number" id="fridgeStock" min="0" required>
            </div>

            <!-- Dough in Freezer -->
            <div class="form-group">
                <label for="freezerStock">Dough in Freezer (boxes):</label>
                <input type="number" id="freezerStock" min="0" required>
            </div>

            <!-- Missed Pull Yesterday -->
            <div class="form-group">
                <label for="missedPull">Did you miss a pull yesterday?</label>
                <select id="missedPull" required>
                    <option value="" disabled selected>Select an option</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </div>

            <!-- Submit Button -->
            <button type="button" id="calculateBtn">Calculate</button>
        </form>

        <!-- Result -->
        <div id="result" class="mt-4"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('calculateBtn').addEventListener('click', function () {
                const dayOfWeek = document.getElementById('dayOfWeek').value;
                const fridgeStockInput = document.getElementById('fridgeStock').value;
                const freezerStockInput = document.getElementById('freezerStock').value;
                const missedPull = document.getElementById('missedPull').value;

                if (!dayOfWeek || fridgeStockInput === '' || freezerStockInput === '' || !missedPull) {
                    alert('Please fill out all fields.');
                    return;
                }

                const fridgeStock = parseInt(fridgeStockInput, 10) || 0;
                const freezerStock = parseInt(freezerStockInput, 10) || 0;

                const portionsPerBin = 6;
                const binsPerBox = 11;
                const projections = {
                    Monday: 38, Tuesday: 38, Wednesday: 38,
                    Thursday: 38, Friday: 50, Saturday: 50, Sunday: 38
                };

                const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

                function getFutureDay(currentDay, daysAhead) {
                    const currentIndex = daysOfWeek.indexOf(currentDay);
                    return daysOfWeek[(currentIndex + daysAhead) % 7];
                }

                const regularDayToPullFor = getFutureDay(dayOfWeek, 3);
                const regularBinsNeeded = projections[regularDayToPullFor] || 0;

                let missedBinsNeeded = 0;
                if (missedPull === 'Yes') {
                    const previousDayIndex = (daysOfWeek.indexOf(dayOfWeek) - 1 + 7) % 7;
                    const missedDayToPullFor = getFutureDay(daysOfWeek[previousDayIndex], 3);
                    missedBinsNeeded = projections[missedDayToPullFor] || 0;
                }

                const totalBinsNeeded = regularBinsNeeded + missedBinsNeeded;
                const binsToPull = totalBinsNeeded - fridgeStock;
                const boxesToPull = Math.ceil(binsToPull / binsPerBox);

                let resultText = `<p>Today is <strong>${dayOfWeek}</strong>.</p>`;
                if (missedPull === 'Yes') {
                    resultText += `<p>Missed pull: ${missedBinsNeeded} bins.</p>`;
                }
                resultText += `<p>Regular pull: ${regularBinsNeeded} bins.</p>`;
                resultText += `<p>Total bins needed: ${totalBinsNeeded}.</p>`;
                resultText += `<p>Boxes to pull: ${boxesToPull}.</p>`;
                document.getElementById('result').innerHTML = resultText;
            });
        });
    </script>
</body>
</html>
